# 创新性研究问题生成系统 - 举一反三思维

## 🎯 核心理念

**不是重复现有研究，而是通过举一反三生成创新性研究问题**

```
传统方式 ❌:
用户问题 → 检索相似研究 → 照搬答案 → 重复研究

创新方式 ✅:
用户问题 → 检索相似研究 → 分析gap → 生成创新问题
```

---

## 📊 系统工作流程

### 阶段1: 知识库构建
从 PubMed 获取已发表的研究，结构化存储

### 阶段2: 创新问题生成（核心）

```
用户输入: "CBT对青少年抑郁有效吗？"
    ↓
【步骤1】解析问题
    提取: P=青少年抑郁, I=CBT, C=?, O=有效性
    ↓
【步骤2】检查完整性
    发现: C (对照组) 未指定
    ↓
【步骤3】生成平行模型
    扩展已知信息的表述方式
    P: "adolescent depression" → ["teenage depression", "youth mood disorder"]
    I: "CBT" → ["cognitive behavioral therapy", "cognitive therapy"]
    ↓
【步骤4】检索相关证据
    用向量检索找到10个相似研究
    不是为了照抄，而是为了学习模式
    ↓
【步骤5】举一反三生成创新问题 ⭐核心⭐
    
    分析已有研究:
    - 研究1: CBT vs 候补名单, 青少年(12-18岁)
    - 研究2: CBT vs 常规治疗, 青少年(13-17岁)
    - 研究3: CBT vs 药物治疗, 成年人
    
    识别gap:
    ✗ CBT vs 其他心理治疗(如IPT) - 少有研究
    ✗ 不同严重程度的青少年 - 未细分
    ✗ 长期随访效果 - 缺乏数据
    ✗ 在线CBT vs 面对面CBT - 新兴方向
    
    生成创新问题:
    1. CBT vs 人际心理治疗(IPT)对中重度青少年抑郁的效果
       创新点: 填补CBT与其他心理治疗比较的空白
       
    2. CBT对轻度青少年抑郁的预防性效果
       创新点: 关注早期干预，而非已确诊患者
       
    3. 基于移动应用的CBT vs传统面对面CBT
       创新点: 探索数字化干预的可行性
       
    4. CBT治疗青少年抑郁的12个月随访效果
       创新点: 关注长期疗效维持
       
    5. CBT联合正念训练 vs 单纯CBT
       创新点: 探索组合治疗的增效作用
    ↓
【步骤6】评估排序
    维度:
    - 创新性: 与现有研究的差异度
    - 可行性: 能否实际执行
    - 临床意义: 对实践的价值
    - 完整性: 问题表述清晰度
    - 伦理性: 是否符合伦理
    ↓
【步骤7】生成最终问题
    输出排序后的创新研究问题列表
```

---

## 🔑 关键技术实现

### 1. `augment_candidate_models_by_analogical_generation()`

**目标**: 不是简单填空，而是创新

```python
# ❌ 错误做法: 直接照搬
if C is None:
    C = evidence[0]['C']  # 照搬第一个研究的对照组

# ✅ 正确做法: 举一反三
分析已有研究使用的对照组:
- 研究1: 候补名单
- 研究2: 常规治疗
- 研究3: 药物治疗

识别gap: 还没有研究比较CBT vs 其他心理治疗
生成创新: C = "人际心理治疗(IPT)"
```

**实现方式**: 使用 LLM 分析模式并生成创新组合

```python
prompt = """
已有研究:
- P=青少年抑郁, I=CBT, C=候补名单
- P=青少年抑郁, I=CBT, C=常规治疗

任务: 生成创新的C（对照组）
要求: 
1. 不要重复已有研究
2. 要有临床意义
3. 要可行

输出: 
- C=人际心理治疗 (创新点: 心理治疗间比较)
- C=正念减压疗法 (创新点: 新兴疗法比较)
"""
```

### 2. `evaluate_and_rank_candidate_models()`

**评估创新性的5个维度**:

1. **Novelty (创新性)**: 
   - 是否与现有研究重复？
   - 是否填补了研究空白？

2. **Feasibility (可行性)**:
   - 能否招募到足够样本？
   - 干预措施是否可实施？

3. **Interesting (有趣性)**:
   -   

4. **Relevant (相关性)**:
   - 与用户输入查询是否相关

5. **Ethical Risk (伦理性)**:
   - 是否符合研究伦理？
   - 对受试者有潜在风险吗？

---

## 📝 完整示例

### 输入
```
用户问题: "CBT对青少年抑郁有效吗？"
```

### 知识库中的相关研究
```
1. CBT vs 候补名单, 青少年(12-18岁), PHQ-9评分 (相似度: 0.92)
2. CBT vs 常规治疗, 青少年(13-17岁), 临床缓解率 (相似度: 0.89)
3. CBT vs 药物, 成年人抑郁, 症状改善 (相似度: 0.75)
```

### 系统输出 (创新问题)

```json
[
  {
    "rank": 1,
    "model": {
      "P": "12-18岁轻度至中度抑郁的青少年",
      "I": "基于移动应用的认知行为疗法(mCBT), 每天15分钟, 持续8周",
      "C": "传统面对面CBT, 每周1次, 持续8周",
      "O": "12周时的抑郁症状改善(PHQ-A评分变化) 及治疗依从性"
    },
    "total_score": 9.2,
    "scores": {
      "novelty": 9.5,
      "feasibility": 8.5,
      "clinical_significance": 9.0,
      "completeness": 9.5,
      "ethical": 9.5
    },
    "innovation_rationale": "数字化干预是新兴方向，现有研究少；比较mCBT与传统CBT的效果和依从性，对推广应用有重要意义",
    "research_gap": "目前缺乏针对青少年抑郁的移动CBT与面对面CBT的直接比较研究"
  },
  {
    "rank": 2,
    "model": {
      "P": "13-17岁中重度抑郁青少年（PHQ-A≥15分）",
      "I": "认知行为疗法(CBT), 每周2次, 持续12周",
      "C": "人际心理治疗(IPT), 每周2次, 持续12周",
      "O": "治疗结束时的临床缓解率及6个月随访的复发率"
    },
    "total_score": 8.8,
    "scores": {
      "novelty": 9.0,
      "feasibility": 8.0,
      "clinical_significance": 9.5,
      "completeness": 9.0,
      "ethical": 9.0
    },
    "innovation_rationale": "CBT与IPT都是循证心理治疗，但缺乏针对青少年抑郁的直接比较；关注长期效果",
    "research_gap": "现有研究多将CBT与候补名单/常规治疗比较，缺少与其他循证心理治疗的head-to-head比较"
  },
  {
    "rank": 3,
    "model": {
      "P": "12-16岁有抑郁症状但未达诊断标准的青少年（PHQ-A 5-9分）",
      "I": "预防性认知行为疗法, 每周1次团体课程, 持续8周",
      "C": "心理健康教育对照组",
      "O": "6个月和12个月时发展为抑郁症的比例"
    },
    "total_score": 8.5,
    "scores": {
      "novelty": 8.5,
      "feasibility": 9.0,
      "clinical_significance": 8.5,
      "completeness": 8.5,
      "ethical": 8.0
    },
    "innovation_rationale": "从治疗转向预防，关注亚临床人群；可能降低青少年抑郁的发病率",
    "research_gap": "现有CBT研究多针对已诊断的抑郁症，预防性研究较少"
  }
]
```

---

## 🎯 与传统RAG的区别

| 维度 | 传统RAG | 本系统（创新RAG） |
|------|---------|------------------|
| 目标 | 回答问题 | 生成新问题 |
| 检索目的 | 找答案 | 学习模式 |
| 生成策略 | 总结现有内容 | 举一反三创新 |
| 评估标准 | 准确性 | 创新性 |
| 应用场景 | QA系统 | 科研设计 |

---

## 💡 举一反三的核心

```
不是问: "现有研究怎么做的？"
而是问: "现有研究没做什么？"

不是问: "我能照搬什么？"
而是问: "我能创新什么？"

不是问: "答案是什么？"
而是问: "还有什么好问题？"
```

---

## 🚀 未来优化方向

1. **更智能的gap识别**
   - 自动分析领域知识图谱
   - 识别未被充分研究的子领域

2. **更丰富的创新策略**
   - 组合创新: A+B 的组合治疗
   - 人群扩展: 从成人扩展到儿童
   - 时间维度: 从短期到长期
   - 环境迁移: 从医院到社区

3. **可行性预评估**
   - 估算样本量需求
   - 评估伦理审批难度
   - 预测研究周期和成本

4. **与文献数据库深度集成**
   - 实时更新知识库
   - 追踪研究趋势
   - 发现新兴研究方向

---

**核心价值**: 帮助研究者提出有价值的、可行的、创新的研究问题，而不是重复已有研究。
